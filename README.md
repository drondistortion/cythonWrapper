# Процесс создания библиотек i2c Python для Raspberry из библиотек i2c Arduino.

1. Склонировать репозиторий cythonWrapper:

```
git clone https://github.com/drondistortion/cythonWrapper
```

2. Сменить директорию

```
cd cythonWrapper
```

3. Запустить скрипт `_replace.sh` переименования файлов с указанием нового и старого названий библиотеки.

```
./_replace.sh pyiArduinoI2Cmodule iarduino_I2C_module
```
    pyiArduinoI2Cmodule - название будущей библиотеки Python
    iarduino_I2C_module - название текущей библиотеки Arduino

4. После переименования в папке pyiArduinoI2Cmodule уже есть файлы pyiArduinoI2Cmodule.pyx и iarduino\_I2C\_module.pxd. В них уже описаны общие для всех модулей функции, такие как `begin()`, `reset()`, `changeAddress()` и т.д. Функции, которые являются уникальными, должны быть описаны в этих двух файлах. Файл .pxd - заголовочный, необходимо указать типы принимаемых и возвращаемых функциями значений. Файл .pyx - файл основного кода, в нём описываются тела этих функций.

5. Скопировать и, по необходимости, модифицировать файлы i2c библиотеки Arduino в директорию pyiArduinoI2Cmodule. Удалить из файла всё, что относится только к Arduino и добавить недостающее. Здесь нужно активно программировать вручную.

6. Запустить скрипт генерации cython-файла `build.sh`.

```
./build.sh
```
    Путь к файлу (на всякий случай): cythonWrapper/pyiArduinoI2Cmodule/build.sh

7. Если всё прошло успешно, будет создан файл `pyiArduinoI2Cmodule.cpp`. Можно удалить лишние файлы запустив `clean.sh`

```
./clean.sh
```

8. Перейти на директорию ниже.

```
cd ..
```
9. Удалить текущий контроль версий.

```
rm -rf .git/
```

10. Создать новый контроль версий (выходит за рамки данного описания) и загрузить на github.

11. Отредактировать файл `setup.py`, указав версию библиотеки.

12. Запустить скрипт `build.sh` в текущей директории

```
./build.sh
```
    Путь к файлу (на всякий случай): cythonWrapper/build.sh

13. Запустить скрипт загрузки на сайт **PYPI.org** (потребуется указать логин, пароль):

```
./upload.sh
```

    На любом из шагов можно написать примеры для бибилотеки. В директории `.\pyiArduinoI2Cmodule\tools` есть скрипты для частичного конвертирования кода для Arduino в код для Python.

## Всё.
